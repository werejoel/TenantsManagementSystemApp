@model TenantsManagementApp.ViewModels.Users.UserDetailsViewModel
@{
ViewData["Title"] = "Delete User";
var fullName = $"{Model.FirstName} {Model.LastName}".Trim();
}
<div class="container mt-0">
<div class="row g-4 justify-content-center">
<div class="col-lg-8 col-xl-7">
<div class="card shadow border-0 rounded">
<div class="card-header bg-danger text-white">
<i class="bi bi-exclamation-octagon me-2"></i> Confirm Deletion
</div>
@if (TempData["Error"] is string err)
{
<div class="alert alert-danger alert-dismissible fade show" role="alert">
<i class="bi bi-exclamation-triangle me-2"></i>@err
<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
}
@if (TempData["Success"] is string ok)
{
<div class="alert alert-success alert-dismissible fade show" role="alert">
<i class="bi bi-check-circle me-2"></i>@ok
<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
}
<div class="card-body">
<!-- Strong warning -->
<div class="alert alert-danger" role="alert">
<div class="fw-semibold mb-1">Are you sure you want to delete this user?</div>
<div class="small mb-0">
This action cannot be undone. If this user is the last <strong>Admin</strong>, deletion will be blocked.
</div>
</div>
<!-- User summary -->
<div class="mb-3">
<div class="small text-uppercase text-muted mb-2">User Summary</div>
<ul class="list-group list-group-flush">
<li class="list-group-item d-flex justify-content-between align-items-center px-0">
<span class="text-muted"><i class="bi bi-person me-2"></i>Name</span>
<span class="fw-semibold">@(!string.IsNullOrWhiteSpace(fullName) ? fullName : "-")</span>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center px-0">
<span class="text-muted"><i class="bi bi-at me-2"></i>Username</span>
<span class="fw-semibold">@Model.UserName</span>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center px-0">
<span class="text-muted"><i class="bi bi-envelope me-2"></i>Email</span>
<span class="fw-semibold">@Model.Email</span>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center px-0">
<span class="text-muted"><i class="bi bi-activity me-2"></i>Status</span>
<span>
<span class="badge rounded-pill @(Model.IsActive ? "bg-success" : "bg-secondary")">
@(Model.IsActive ? "Active" : "Inactive")
</span>
<span class="badge rounded-pill @(Model.EmailConfirmed ? "bg-success" : "bg-warning text-dark") ms-1">
@(Model.EmailConfirmed ? "Email Confirmed" : "Email Unconfirmed")
</span>
</span>
</li>
<li class="list-group-item d-flex justify-content-between align-items-center px-0">
<span class="text-muted"><i class="bi bi-people me-2"></i>Roles</span>
<span class="fw-semibold">@((Model.Roles?.Count ?? 0)) assigned</span>
</li>
</ul>
@if (Model.Roles != null && Model.Roles.Count > 0)
{
<div class="mt-2 d-flex flex-wrap gap-2">
@foreach (var r in Model.Roles.OrderBy(x => x))
{
<span class="badge rounded-pill bg-primary">
<i class="bi bi-shield-check me-1"></i>@r
</span>
}
</div>
}
</div>
<!-- Confirm form -->
<form asp-action="DeleteConfirmed" method="post" class="mt-3">
<input type="hidden" name="id" value="@Model.Id" />
<div class="form-check mb-3">
<input class="form-check-input" type="checkbox" value="true" id="confirmChk">
<label class="form-check-label" for="confirmChk">
I understand this action is permanent and cannot be undone.
</label>
</div>
<div class="d-flex justify-content-end gap-2">
<button type="submit" class="btn btn-danger" id="deleteBtn" disabled>
<i class="bi bi-trash3 me-1"></i> Yes, Delete
</button>
<a asp-action="Index" class="btn btn-info">
<i class="bi bi-x-circle me-1"></i> Cancel
</a>
<a asp-action="Index" class="btn btn-primary">
<i class="bi bi-arrow-left me-1"></i> Back to Users
</a>
</div>
</form>
</div>
<div class="card-footer bg-light small text-muted">
Deleted users cannot be recovered. Consider deactivating instead if you might need this account later.
</div>
</div>
</div>
</div>
</div>
@section Scripts {
<script>
// Enable the Delete button only when the confirmation is checked
const chk = document.getElementById('confirmChk');
const btn = document.getElementById('deleteBtn');
if (chk && btn) {
chk.addEventListener('change', () => btn.disabled = !chk.checked);
}
</script>
}